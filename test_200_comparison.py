#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
測試200句自然語言句子，使用 parser_date_time 函數取得日期及時間字串，並與預期結果進行比對
"""

import sys
import os
import random
sys.path.append('/Volumes/aiserver2/ai_parser')

from handle_time2025 import parser_date_time

# 測試數據：句子 -> (預期日期, 預期時間)
test_data = [
    ("我想預約明天上午10點", ("2025-12-15", "10:00")),
    ("幫我訂今天下午3點的位子", ("2025-12-14", "15:00")),
    ("後天中午12點可以預約嗎", ("2025-12-16", "12:00")),
    ("預約下星期一早上9點", ("2025-12-16", "09:00")),  # 假設今天是星期日
    ("我想訂明天晚上7點", ("2025-12-15", "19:00")),
    ("幫我安排今天中午12點的會議", ("2025-12-14", "12:00")),
    ("預約後天上午11點半", ("2025-12-16", "11:30")),
    ("下星期二下午2點可以嗎", ("2025-12-17", "14:00")),
    ("我想訂今天晚上8點", ("2025-12-14", "20:00")),
    ("幫我預約明天早上8點", ("2025-12-15", "08:00")),
    ("預約下星期三中午12點", ("2025-12-18", "12:00")),
    ("今天下午4點訂位", ("2025-12-14", "16:00")),
    ("明天上午9點半預約", ("2025-12-15", "09:30")),
    ("後天晚上6點", ("2025-12-16", "18:00")),
    ("下星期四上午10點", ("2025-12-19", "10:00")),
    ("今天中午1點", ("2025-12-14", "13:00")),
    ("明天下午3點半", ("2025-12-15", "15:30")),
    ("後天早上7點", ("2025-12-16", "07:00")),
    ("下星期五晚上8點", ("2025-12-20", "20:00")),
    ("今天上午11點", ("2025-12-14", "11:00")),
    ("預約明天三點", ("2025-12-15", "15:00")),
    ("幫我訂後天一點半", ("2025-12-16", "13:30")),
    ("下星期一兩點", ("2025-12-16", "14:00")),
    ("明天五點半", ("2025-12-15", "17:30")),
    ("後天四點", ("2025-12-16", "16:00")),
    ("下星期二六點半", ("2025-12-17", "18:30")),
    ("明天七點", ("2025-12-15", "19:00")),
    ("後天八點半", ("2025-12-16", "20:30")),
    ("下星期三九點", ("2025-12-18", "21:00")),
    ("明天十點半", ("2025-12-15", "22:30")),
    ("後天十一點", ("2025-12-16", "23:00")),
    ("下星期四十二點半", ("2025-12-19", "12:30")),
    ("明天一點", ("2025-12-15", "13:00")),
    ("後天兩點半", ("2025-12-16", "14:30")),
    ("下星期五三點", ("2025-12-20", "15:00")),
    ("明天四點半", ("2025-12-15", "16:30")),
    ("後天五點", ("2025-12-16", "17:00")),
    ("下星期六六點半", ("2025-12-21", "18:30")),
    ("明天七點", ("2025-12-15", "19:00")),
    ("後天八點半", ("2025-12-16", "20:30")),
    ("預約昨天上午10點", ("2025-12-13", "10:00")),  # 過去時間
    ("幫我訂前天下午3點", ("2025-12-12", "15:00")),  # 過去時間
    ("大前天中午12點", ("2025-12-11", "12:00")),  # 過去時間
    ("大後天早上9點", ("2025-12-17", "09:00")),
    ("本日晚上7點", ("2025-12-14", "19:00")),
    ("昨日上午11點", ("2025-12-13", "11:00")),  # 過去時間
    ("今兒下午2點", ("2025-12-14", "14:00")),
    ("明兒早上8點", ("2025-12-15", "08:00")),
    ("後日中午1點", ("2025-12-16", "13:00")),
    ("近日內下午4點", ("2025-12-14", "16:00")),  # 相對時間，可能需要調整
    ("馬上預約", ("", "")),  # 沒有具體時間
    ("立刻訂位", ("", "")),  # 沒有具體時間
    ("現在下午5點", ("2025-12-14", "17:00")),
    ("等下上午10點", ("2025-12-14", "10:00")),
    ("等一下中午12點", ("2025-12-14", "12:00")),
    ("本天晚上6點", ("2025-12-14", "18:00")),
    ("這天上午9點", ("2025-12-14", "09:00")),
    ("今日下午3點", ("2025-12-14", "15:00")),
    ("明日早上7點", ("2025-12-15", "07:00")),
    ("後日晚上8點", ("2025-12-16", "20:00")),
    ("預約下星期一上午10點", ("2025-12-16", "10:00")),
    ("下星期二下午2點", ("2025-12-17", "14:00")),
    ("上星期三中午12點", ("2025-12-11", "12:00")),  # 過去時間
    ("下下星期四早上9點", ("2025-12-26", "09:00")),
    ("本星期五晚上7點", ("2025-12-20", "19:00")),
    ("下星期六上午11點", ("2025-12-21", "11:00")),
    ("上星期日中午1點", ("2025-12-08", "13:00")),  # 過去時間
    ("下下星期一下午3點", ("2025-12-23", "15:00")),
    ("本星期二晚上6點", ("2025-12-17", "18:00")),
    ("下星期三上午8點", ("2025-12-18", "08:00")),
    ("上星期四中午12點", ("2025-12-12", "12:00")),  # 過去時間
    ("下下星期五下午4點", ("2025-12-27", "16:00")),
    ("本星期六早上10點", ("2025-12-21", "10:00")),
    ("下星期日晚上9點", ("2025-12-22", "21:00")),
    ("上星期一上午11點", ("2025-12-09", "11:00")),  # 過去時間
    ("下下星期二中午2點", ("2025-12-24", "14:00")),
    ("本星期三下午5點", ("2025-12-18", "17:00")),
    ("下星期四早上7點", ("2025-12-19", "07:00")),
    ("上星期五晚上8點", ("2025-12-13", "20:00")),  # 過去時間
    ("下下星期六上午9點", ("2025-12-28", "09:00")),
    ("預約2025年12月15日早上9點", ("2025-12-15", "09:00")),
    ("2025-12-16下午3點", ("2025-12-16", "15:00")),
    ("12月17日中午12點", ("2025-12-17", "12:00")),
    ("2025/12/18晚上7點", ("2025-12-18", "19:00")),
    ("明年1月1日早上8點", ("2026-01-01", "08:00")),
    ("去年12月25日中午1點", ("2024-12-25", "13:00")),  # 過去時間
    ("今年春節上午10點", ("2025-01-29", "10:00")),  # 2025年春節
    ("明年中秋節晚上6點", ("2026-09-17", "18:00")),
    ("後年國慶節下午2點", ("2027-10-01", "14:00")),
    ("今年五一勞動節中午12點", ("2025-05-01", "12:00")),
    ("明年端午節早上9點", ("2026-05-31", "09:00")),
    ("去年重陽節下午4點", ("2024-10-11", "16:00")),  # 過去時間
    ("今年教師節上午11點", ("2025-09-10", "11:00")),
    ("後年元旦晚上8點", ("2027-01-01", "20:00")),
    ("明年七夕節中午1點", ("2026-08-10", "13:00")),
    ("去年兒童節下午3點", ("2024-06-01", "15:00")),  # 過去時間
    ("今年植樹節早上7點", ("2025-03-12", "07:00")),
    ("後年婦女節晚上5點", ("2027-03-08", "17:00")),
    ("明年聖誕節上午10點", ("2026-12-25", "10:00")),
    ("去年萬聖節中午2點", ("2024-10-31", "14:00")),  # 過去時間
    # 繼續添加更多測試句子...
]

# 補充到200句
additional_sentences = [
    ("今天早上6點起床", ("2025-12-14", "06:00")),
    ("明天晚上9點看電影", ("2025-12-15", "21:00")),
    ("後天中午吃飯", ("2025-12-16", "12:00")),
    ("下星期一上班", ("2025-12-16", "09:00")),  # 假設上班時間
    ("今天下午休息", ("2025-12-14", "14:00")),
    ("明天上午開會", ("2025-12-15", "10:00")),
    ("後天晚上聚餐", ("2025-12-16", "19:00")),
    ("下星期二購物", ("2025-12-17", "14:00")),
    ("今天中午睡覺", ("2025-12-14", "12:00")),
    ("明天早上跑步", ("2025-12-15", "07:00")),
    ("後天下午逛街", ("2025-12-16", "15:00")),
    ("下星期三旅行", ("2025-12-18", "09:00")),
    ("今天晚上唱歌", ("2025-12-14", "20:00")),
    ("明天中午出差", ("2025-12-15", "12:00")),
    ("後天早上散步", ("2025-12-16", "08:00")),
    ("下星期四慶祝", ("2025-12-19", "18:00")),
    ("今天上午紀念", ("2025-12-14", "10:00")),
    ("明天下午玩耍", ("2025-12-15", "16:00")),
    ("後天晚上賞花", ("2025-12-16", "19:00")),
    ("下星期五掃墓", ("2025-12-20", "09:00")),
    ("今天中午猜燈謎", ("2025-12-14", "12:00")),
    ("明天早上吃粽子", ("2025-12-15", "08:00")),
    ("後天下午登高", ("2025-12-16", "14:00")),
    ("下星期六送花", ("2025-12-21", "10:00")),
    ("今天晚上放煙火", ("2025-12-14", "20:00")),
    ("明天上午拜年", ("2025-12-15", "09:00")),
    ("後天中午賞月", ("2025-12-16", "12:00")),
    ("下星期日遊行", ("2025-12-22", "11:00")),
    ("今天下午跨年", ("2025-12-14", "15:00")),
    ("明天晚上觀測", ("2025-12-15", "20:00")),
    ("後天早上吃餃子", ("2025-12-16", "08:00")),
    ("下星期一出海", ("2025-12-16", "07:00")),
    ("今天中午種樹", ("2025-12-14", "12:00")),
    ("明天下午慶祝", ("2025-12-15", "16:00")),
    ("後天晚上約會", ("2025-12-16", "19:00")),
    ("下星期二見面", ("2025-12-17", "14:00")),
    ("今天早上打電話", ("2025-12-14", "08:00")),
    ("明天中午回家", ("2025-12-15", "12:00")),
    ("後天下午上班", ("2025-12-16", "13:00")),
    ("下星期三睡覺", ("2025-12-18", "22:00")),
    ("今天晚上起床", ("2025-12-14", "20:00")),
    ("明天早上開會", ("2025-12-15", "09:00")),
    ("後天中午吃飯", ("2025-12-16", "12:00")),
    ("下星期四購物", ("2025-12-19", "15:00")),
    ("今天下午看電影", ("2025-12-14", "16:00")),
    ("明天晚上唱歌", ("2025-12-15", "20:00")),
    ("後天早上逛街", ("2025-12-16", "09:00")),
    ("下星期五旅行", ("2025-12-20", "08:00")),
    ("今天中午聚餐", ("2025-12-14", "12:00")),
    ("明天下午散步", ("2025-12-15", "15:00")),
    ("後天晚上休息", ("2025-12-16", "19:00")),
    ("下星期六慶祝", ("2025-12-21", "18:00")),
    ("今天上午紀念", ("2025-12-14", "10:00")),
    ("明天中午玩耍", ("2025-12-15", "12:00")),
    ("後天下午賞花", ("2025-12-16", "14:00")),
    ("下星期日掃墓", ("2025-12-22", "09:00")),
    ("今天晚上猜燈謎", ("2025-12-14", "20:00")),
    ("明天早上吃粽子", ("2025-12-15", "08:00")),
    ("後天中午登高", ("2025-12-16", "12:00")),
    ("下星期一送花", ("2025-12-16", "10:00")),
    ("今天下午放煙火", ("2025-12-14", "16:00")),
    ("明天晚上拜年", ("2025-12-15", "20:00")),
    ("後天早上賞月", ("2025-12-16", "08:00")),
    ("下星期二遊行", ("2025-12-17", "11:00")),
    ("今天中午跨年", ("2025-12-14", "12:00")),
    ("明天下午觀測", ("2025-12-15", "16:00")),
    ("後天晚上吃餃子", ("2025-12-16", "20:00")),
    ("下星期三出海", ("2025-12-18", "07:00")),
    ("今天早上種樹", ("2025-12-14", "08:00")),
    ("明天中午慶祝", ("2025-12-15", "12:00")),
    ("後天下午約會", ("2025-12-16", "15:00")),
    ("下星期四見面", ("2025-12-19", "14:00")),
    ("今天晚上打電話", ("2025-12-14", "20:00")),
    ("明天早上回家", ("2025-12-15", "09:00")),
    ("後天中午上班", ("2025-12-16", "12:00")),
    ("下星期五睡覺", ("2025-12-20", "23:00")),
    ("今天下午起床", ("2025-12-14", "16:00")),
    ("明天晚上開會", ("2025-12-15", "20:00")),
    ("後天早上吃飯", ("2025-12-16", "08:00")),
    ("下星期六購物", ("2025-12-21", "14:00")),
    ("今天中午看電影", ("2025-12-14", "12:00")),
    ("明天下午唱歌", ("2025-12-15", "16:00")),
    ("後天晚上逛街", ("2025-12-16", "20:00")),
    ("下星期日旅行", ("2025-12-22", "09:00")),
    ("今天早上聚餐", ("2025-12-14", "08:00")),
    ("明天中午散步", ("2025-12-15", "12:00")),
    ("後天下午休息", ("2025-12-16", "15:00")),
    ("下星期一慶祝", ("2025-12-16", "18:00")),
    ("今天晚上紀念", ("2025-12-14", "20:00")),
    ("明天早上玩耍", ("2025-12-15", "09:00")),
    ("後天中午賞花", ("2025-12-16", "12:00")),
    ("下星期二掃墓", ("2025-12-17", "10:00")),
    ("今天下午猜燈謎", ("2025-12-14", "16:00")),
    ("明天晚上吃粽子", ("2025-12-15", "20:00")),
    ("後天早上登高", ("2025-12-16", "08:00")),
    ("下星期三送花", ("2025-12-18", "11:00")),
    ("今天中午放煙火", ("2025-12-14", "12:00")),
    ("明天下午拜年", ("2025-12-15", "16:00")),
    ("後天晚上賞月", ("2025-12-16", "20:00")),
    ("下星期四遊行", ("2025-12-19", "12:00")),
    ("今天早上跨年", ("2025-12-14", "08:00")),
    ("明天中午觀測", ("2025-12-15", "12:00")),
    ("後天下午吃餃子", ("2025-12-16", "15:00")),
    ("下星期五出海", ("2025-12-20", "07:00")),
    ("今天晚上種樹", ("2025-12-14", "20:00")),
    ("明天早上慶祝", ("2025-12-15", "09:00")),
    ("後天中午約會", ("2025-12-16", "12:00")),
    ("下星期六見面", ("2025-12-21", "14:00")),
    ("今天下午打電話", ("2025-12-14", "16:00")),
    ("明天晚上回家", ("2025-12-15", "20:00")),
    ("後天早上上班", ("2025-12-16", "08:00")),
    ("下星期日睡覺", ("2025-12-22", "22:00")),
    ("今天中午起床", ("2025-12-14", "12:00")),
    ("明天下午開會", ("2025-12-15", "16:00")),
    ("後天晚上吃飯", ("2025-12-16", "20:00")),
    ("下星期一購物", ("2025-12-16", "14:00")),
    ("今天早上看電影", ("2025-12-14", "08:00")),
    ("明天中午唱歌", ("2025-12-15", "12:00")),
    ("後天下午逛街", ("2025-12-16", "15:00")),
    ("下星期二旅行", ("2025-12-17", "09:00")),
    ("今天晚上聚餐", ("2025-12-14", "20:00")),
    ("明天早上散步", ("2025-12-15", "09:00")),
    ("後天中午休息", ("2025-12-16", "12:00")),
    ("下星期三慶祝", ("2025-12-18", "18:00")),
    ("今天下午紀念", ("2025-12-14", "16:00")),
    ("明天晚上玩耍", ("2025-12-15", "20:00")),
    ("後天早上賞花", ("2025-12-16", "08:00")),
    ("下星期四掃墓", ("2025-12-19", "10:00")),
    ("今天中午猜燈謎", ("2025-12-14", "12:00")),
    ("明天下午吃粽子", ("2025-12-15", "16:00")),
    ("後天晚上登高", ("2025-12-16", "20:00")),
    ("下星期五送花", ("2025-12-20", "11:00")),
    ("今天早上放煙火", ("2025-12-14", "08:00")),
    ("明天中午拜年", ("2025-12-15", "12:00")),
    ("後天下午賞月", ("2025-12-16", "15:00")),
    ("下星期六遊行", ("2025-12-21", "12:00")),
    ("今天晚上跨年", ("2025-12-14", "20:00")),
    ("明天早上觀測", ("2025-12-15", "09:00")),
    ("後天中午吃餃子", ("2025-12-16", "12:00")),
    ("下星期日出海", ("2025-12-22", "07:00")),
]

# 合併測試數據
test_data.extend(additional_sentences)

def run_tests():
    """執行測試並輸出結果"""
    print("開始測試200句自然語言句子，使用 parser_date_time 函數...")
    print("=" * 100)

    results = []
    success_count = 0
    total_tests = len(test_data)

    for i, (sentence, expected) in enumerate(test_data[:200], 1):  # 限制為200句
        try:
            actual_date, actual_time = parser_date_time(sentence, time_format_type=2)
            actual = (actual_date, actual_time)

            # 比較結果
            is_match = actual == expected
            if is_match:
                success_count += 1
                status = "✓ 匹配"
            else:
                status = "✗ 不匹配"

            results.append((i, sentence, expected, actual, is_match))

            print(f"{i:3d}. {sentence}")
            print(f"     預期: 日期='{expected[0]}', 時間='{expected[1]}'")
            print(f"     實際: 日期='{actual[0]}', 時間='{actual[1]}'  {status}")
            print()

        except Exception as e:
            results.append((i, sentence, expected, f"錯誤: {str(e)}", False))
            print(f"{i:3d}. {sentence}")
            print(f"     預期: 日期='{expected[0]}', 時間='{expected[1]}'")
            print(f"     實際: 錯誤: {str(e)}  ✗ 錯誤")
            print()

    print("=" * 100)
    print(f"測試完成！總共測試了 {total_tests} 句")
    print(f"成功匹配: {success_count}")
    print(f"匹配失敗: {total_tests - success_count}")
    print(".1f")

    return results

if __name__ == "__main__":
    run_tests()