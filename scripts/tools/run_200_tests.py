#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
測試 handle_time2025.py 中的 parser_date_time 函數
使用 200 句自然語言測試句，並將結果輸出到 test200.txt
"""

import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))
sys.path.append(os.path.join(os.path.dirname(os.path.abspath(__file__)), 'ai_parser'))

from handle_time2025 import parser_date_time

# 測試句子列表 - 涵蓋各種日期、時間、預約情境
test_sentences = [
    # 基本預約句子 - 今天相關 (1-20)
    "我想預約今天上午10點",
    "幫我訂今天下午3點的位子",
    "今天中午12點可以預約嗎",
    "預約今天早上9點",
    "我想訂今天晚上7點",
    "幫我安排今天中午12點的會議",
    "預約今天上午11點半",
    "今天下午4點訂位",
    "我想訂今天晚上8點",
    "幫我預約今天早上8點",
    "預約今天中午1點",
    "今天下午3點半",
    "明天上午9點預約",
    "後天中午12點",
    "下星期一早上9點",
    "今天上午11點",
    "明天下午2點",
    "後天晚上6點",
    "下星期二上午10點",
    "今天中午12點半",

    # 中文數字時間表達 (21-40)
    "預約明天三點",
    "幫我訂後天一點半",
    "下星期一兩點",
    "明天五點半",
    "後天四點",
    "下星期二六點半",
    "明天七點",
    "後天八點半",
    "下星期三九點",
    "明天十點半",
    "後天十一點",
    "下星期四十二點半",
    "明天一點",
    "後天兩點半",
    "下星期五三點",
    "明天四點半",
    "後天五點",
    "下星期六六點半",
    "明天七點",
    "後天八點半",

    # 星期表達 (41-60)
    "預約下星期一上午10點",
    "下星期二下午2點",
    "上星期三中午12點",
    "下下星期四早上9點",
    "本星期五晚上7點",
    "下星期六上午11點",
    "上星期日中午1點",
    "下下星期一下午3點",
    "本星期二晚上6點",
    "下星期三上午8點",
    "上星期四中午12點",
    "下下星期五下午4點",
    "本星期六早上10點",
    "下星期日晚上9點",
    "上星期一上午11點",
    "下下星期二中午2點",
    "本星期三下午5點",
    "下星期四早上7點",
    "上星期五晚上8點",
    "下下星期六上午9點",

    # 具體日期表達 (61-80)
    "預約2025年12月15日早上9點",
    "2025-12-16下午3點",
    "12月17日中午12點",
    "2025/12/18晚上7點",
    "明年1月1日早上8點",
    "去年12月25日中午1點",
    "今年春節上午10點",
    "明年中秋節晚上6點",
    "後年國慶節下午2點",
    "今年五一勞動節中午12點",
    "明年端午節早上9點",
    "去年重陽節下午4點",
    "今年教師節上午11點",
    "後年元旦晚上8點",
    "明年七夕節中午1點",
    "去年兒童節下午3點",
    "今年植樹節早上7點",
    "後年婦女節晚上5點",
    "明年聖誕節上午10點",
    "去年萬聖節中午2點",

    # 月份日期組合 (81-100)
    "預約1月15日早上9點",
    "2月20日中午12點",
    "3/15下午3點",
    "4-20晚上7點",
    "5月1日早上8點",
    "6月15日中午1點",
    "7/20下午4點",
    "8-15晚上6點",
    "9月10日早上9點",
    "10月1日中午12點",
    "11/15下午2點",
    "12-25晚上8點",
    "1月31日早上7點",
    "2月28日中午11點",
    "3/14下午5點",
    "4-5晚上9點",
    "5月20日早上10點",
    "6月30日中午2點",
    "7/4下午3點",
    "8-8晚上7點",

    # 時間段表達 (101-120)
    "預約明天早上8點",
    "後天上午9點半",
    "下星期一中午12點",
    "明天下午2點",
    "後天傍晚5點",
    "下星期二晚上6點",
    "明天凌晨3點",
    "後天清晨6點",
    "下星期三深夜11點",
    "明天午夜12點",
    "後天早上7點",
    "下星期四上午10點",
    "明天中午1點",
    "後天下午4點",
    "下星期五傍晚6點",
    "明天晚上8點",
    "後天凌晨2點",
    "下星期六清晨5點",
    "明天深夜10點",
    "後天午夜1點",

    # 複雜時間表達 (121-140)
    "預約明天上午十點半",
    "幫我訂後天下午兩點",
    "下星期一晚上八點半",
    "明天中午十二點",
    "後天早上九點",
    "下星期二下午三點半",
    "明天晚上七點",
    "後天上午十一點",
    "下星期三中午一點",
    "明天傍晚六點",
    "後天凌晨四點",
    "下星期四清晨七點",
    "明天深夜十一點",
    "後天午夜十二點",
    "下星期五早上八點",
    "明天上午九點半",
    "後天下午五點",
    "下星期六晚上九點",
    "明天中午十二點半",
    "後天早上六點",

    # 相對日期表達 (141-160)
    "預約明天的上午10點",
    "後天的下午3點",
    "大後天中午12點",
    "前天早上9點",
    "昨天晚上7點",
    "明天的中午12點",
    "後天的上午11點",
    "大後天的下午4點",
    "前天的晚上8點",
    "昨天的早上8點",
    "明天的中午1點",
    "後天的下午3點半",
    "大後天的晚上6點",
    "前天的上午10點",
    "昨天的中午12點",
    "明天的下午2點",
    "後天的傍晚5點",
    "大後天的晚上7點",
    "前天的早上9點",
    "昨天的上午11點",

    # 混合表達 (161-180)
    "我想在明天上午10點預約",
    "幫我安排後天下午3點的會議",
    "預約下星期一中午12點的位子",
    "我想訂明天晚上7點",
    "可以預約後天早上9點嗎",
    "幫我訂下星期二下午2點",
    "預約今天中午12點",
    "我想安排明天上午11點",
    "幫我預約後天晚上6點",
    "下星期三早上8點可以嗎",
    "預約明天中午1點",
    "我想訂後天下午4點",
    "幫我安排下星期四晚上8點",
    "預約明天早上7點",
    "後天上午9點半訂位",
    "我想預約下星期五中午12點",
    "幫我訂明天傍晚6點",
    "預約後天凌晨3點",
    "下星期六清晨5點",
    "明天深夜11點",

    # 特殊時間表達 (181-200)
    "預約明天中午",
    "幫我訂後天晚上",
    "下星期一早上",
    "明天下午",
    "後天中午",
    "下星期二傍晚",
    "明天晚上",
    "後天凌晨",
    "下星期三清晨",
    "明天深夜",
    "後天午夜",
    "下星期四早上",
    "明天上午",
    "後天下午",
    "下星期五晚上",
    "明天中午12點",
    "後天晚上8點",
    "下星期六上午9點",
    "明天下午3點",
    "後天中午12點"
]

def run_tests_and_save():
    """執行測試並將結果保存到 test200.txt"""
    print("開始測試 parser_date_time 函數...")
    print("=" * 80)

    with open('test200.txt', 'w', encoding='utf-8') as f:
        f.write("parser_date_time 函數測試結果\n")
        f.write("=" * 80 + "\n")
        f.write("格式: 輸入句子 -> 日期,時間\n\n")

        success_count = 0
        error_count = 0

        for i, sentence in enumerate(test_sentences, 1):
            try:
                date_result, time_result = parser_date_time(sentence, time_format_type=2)
                result_str = f"{date_result},{time_result}"
                f.write(f"{i:2d}. {sentence} -> {result_str}\n")
                success_count += 1
                print(f"{i:2d}. {sentence} -> {result_str}")
            except Exception as e:
                result_str = f"錯誤: {str(e)}"
                f.write(f"{i:2d}. {sentence} -> {result_str}\n")
                error_count += 1
                print(f"{i:2d}. {sentence} -> {result_str}")

        f.write("\n" + "=" * 80 + "\n")
        f.write(f"測試完成！總共測試了 {len(test_sentences)} 句\n")
        f.write(f"成功解析: {success_count}\n")
        f.write(f"解析錯誤: {error_count}\n")

    print("\n" + "=" * 80)
    print("測試完成！總共測試了 {} 句".format(len(test_sentences)))
    print(f"成功解析: {success_count}")
    print(f"解析錯誤: {error_count}")
    print("結果已保存到 test200.txt")

if __name__ == "__main__":
    run_tests_and_save()